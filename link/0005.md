# 浅谈数据链路层01
* 阅读难度:低
### 前言
记得上个星期，我们聊了一下网络体系结构的最低层--物理层，那么现在，我们就来谈一下物理层的
上一层--数据链路层

数据链路层不同于物理层，物理层关注的只是单个比特的传输，而数据链路层更多的是注重如何实现两台
机器之间有效可靠完整信息块的(称为帧)的通信
### 数据链路层的服务
***
数据链路层使用物理层提供的服务在信道上传输和接收比特，同时还要提供相应的服务:
* 包括向网络层提供定义良好的服务接口
* 处理传输错误(其他更高的层次也会进行)
* 控制数据流的传输，保证接收方不会被过多的数据淹没而造成丢包
数据链路层从网络层获得数据 包，然后将这些数据包拆分，封装成帧(frame)
每一个帧都包含一个帧头，一个有效负荷(用来保存数据包),还有一个帧尾


![数据包和帧的关系](https://github.com/SeaHub/BlogOfComputerNetwork/blob/master/res/relationship.png)


数据链路层可以为网络层提供各种不同的服务。实际提供的服务可能因为具体的协议不同而有差异
一般情况下都可以提供一下三种服务
* 无确认的无连接服务
* 有确认的无连接服务
* 有确认的有连接服务
***
无连接服务服务是指源机器向目标机器发送独立的帧，目标机器并不对这些帧进行确认。以我们的生活常识来
理解就是，这个就跟我们去邮局邮递信件那样，我们写好收信人地址，然后把信件寄出去，但是我们寄出去的
信件到底发生了什么，我们就 不得而知了

有确认连接就是当你向上层提供这种服务的时候，依然没有建立逻辑连接，但是发出的每一帧数据，我们都需要
单独确认。这样的的话，源机器发出了数据，就可以知道发的数据是否到达目标机器，没有收到确认的信息
的话，就需要重新发送。这个就跟我们寄快递很相似了，我们寄出去的快递我们没办法知道发生了什么，但是我们
可以根据接收的朋友的信息来判断是否快递是否成功到达

有确认的有连接服务即需要在源机器和目标机器进行数据传输之前，要先建立一个连接，连接上
发送的每一帧都会被编号，数据链路层确保发出的每个帧都会被接收方接收到，而且还是只接受一次。
因此，根据我们的描述，我们可以知道，我们相当于为网络层提供了一个有效的比特流。有确认的有连接服务必须经历三个阶段
1. 建立连接，并进行各种必要准备的初始化
2. 进行真正的数据传输
3. 断开连接，释放资源


这种服务就跟我们电话系统很相似了，每次我们要打电话，都是要先拨通朋友的号码，然后进行通话，最后聊完了
我们就要挂电话了

### 差错控制和纠正
正如我们前面所提及的，在信道进行比特传输的过程中，肯定是会有各种干扰的,在各种的干扰之下，信道传输数据
就肯定会发生传输错误了。那么对于发生的错误，我们应该怎么办呢?

现在比较通用的是两种错误处理策略，一种是使用纠错码，另外一种是使用检错码。
##### 纠错码
纠错码，顾名思义，就是用来纠错嘛。主要的思想是在每一个发送的帧里面添加足够多的冗余信息，以便接收方
可以推算出被发送的数据究竟是什么。
##### 检错码
检错码，就是在发送数据的时候，也添加一定的冗余信息，然后让接收方判断传输数据的过程是否发生了
错误，如果出错了，那么就请求发送方重新发送

检错码和纠错码是分别应用于不同的情形的，例如检错码就是应用与高度可靠的信道(例如光纤)，因为出错的
概率很小，出错了，就叫发送方再发一遍就可以了。但是纠错码的情况就是不一样了，在一些发生错误概率较高
的信道，例如(无线链路)，你使用检错码也是于事无补，即使你知道发生错误，请求再发一遍，还是出错，那
应该怎么办呢。所以这个时候就应该使用纠错码了，通过纠错码还原发送出错的数据块，毕竟，人还是要靠自己的

***
##### 结语
更多有关纠错码和检错码的内容，我会在下星期进行探讨的。

