#计算机网络参考模型
1. 阅读难度:低

 我先介绍两个很重要的网络体系结构:OSI(Open System Interconnection Reference Model)模型和TCP/IP模型。虽然OSI模型相关的协议没有被广泛使用，但是该模型还是有很重要的參考意义的，而TCP/IP模型刚好与之相反，它的模型很少被提及，但是它的协议就被广泛地使用。所以涅，我们还是值得好好讨论一下这两个模型


![参考图]{http://d.pr/i/1ji4r}

##OSI模型有7层，每层的基本原理如下
1. 每层的功能应该执行一个明确的功能

2. 层与层边界的选择应该使跨越接口的信息流最小

3. 层数应该足够多,保证不同的功能不会混杂在一层，同时层数不能太多，以免体系结构变得过于庞大

 保证原理实现的一个重点是层与层之间的接口定义清晰，这样不仅可以减少层与层之间的信息量，

 还可以使同层的协议替换更加容易，即同一层的当前协议或实现替换成另外一个完全不同的协议或者实现。类比过去，这就跟程序开发过程中要求尽量实现高内聚，松耦合的理念很相似。都为了系统健壮和方便维护的目的

 下面我就简要地说一下OSI模型

 * 物理层（Physical Layer）：关注在一条信道上传输原始比特，负责管理电脑通信设备和网络媒体之间的互通，这是ISO模型的最低层了

* 数据链路层（(Data Link Layer）：主要任务是将一个原始的传输设施转变成一条没有漏检错误的线路，负责网络寻址、错误侦测和改错。当网络层把数据交给链路层时，链路层就会将数据包封装成帧再发传输出去。一帧包括帧头，有效载荷，帧尾
 
* 网络层(Network Layer)：主要要考虑的东西就是如何将数据包从源端路由发送到接收方，决定数据的路径选择和转寄，这个就跟路由的算法有关了，我以后会详细介绍，现在就先了解一下
 
* 传输层(Transport Layer)：传输层就是接收来自上一层的数据，然后在数据包较大的时候，将数据分隔层较少的单元，然后把这些单元传输到网络层，确保到达另一端的传输层，并保证服务的质量。参考上面的图解
 
* 会话层(Session Layer):会话层控制不同电脑之间的会话，具体而言呢，就是它建立，管理，结束本地和远程应用之间的连接。会话层通常提供各种服务，例如提到的会话管理，还有令牌管理(不允许源端和接收方同时进行某些关键操作，类比操作系统处理并发的令牌管理)，同步功能(就是提供断点，在系统崩溃的时候恢复到断点时的状态)
 
* 表示层(Presentation Layer)：表示层在应用层之间建立关联,即使应用层之间使用不同的语法和语义，表示层也能通过映射来解决它们之间的差异
 
* 应用层(Application Layer)：应用层呢，就是与用户的软件直接交互的了，很自然地就包括到了各种协议啦，例如我们见得非常多的超文本传输协议HTTP,还有文件传输协议FTP，电子邮件SMTP，远程登录的SSH
 
## TCP/IP参考模型
 这个模型相信很多读者都有所耳闻，不过大家应该了解的都是TCP/IP协议，我最开始了解TCP/IP 也是因为它的协议，但是我现在要介绍的是被称为TCP/IP的参考模型，它最开始是源于美国的国防部的一个军用项目的。
 
 严格来说TCP/IP只有三个层，不过一般被认为有4层，嗯，怎么回事呢？
 
* 链路层（link layer）：这是模型的最低层，描述了链路必须完成什么样的功能才能满足无连接网络层的要求。这个不是真正意思上的一个层，它只是数据包从一个设备的网络层传输到另外一个设备的网络层的方法，换而言之，它是主机和传输线路之间的一个接口
 
* 网络互联层（internet layer ）:它大致对应于 OSI的网络层，主要任务是允许主机将数据包注入到任何网络，并且让这些数据包独立(可以经过不同的网络)到达接收方
 
* 传输层(transport layer)：大致对应OSI的传输层,能够解决诸如端到端可靠性（“数据是否已经到达目的地？”）和保证数据按照正确的顺序到达这样的问题,另一方面，提供的这种端对端服务是可以独立与用户数据的结构的，并且能做到不依赖下层的的网络
 
* 应用层(application layer)：它就是和OSI的应用层一样，负责和用户的交互,包含了所有的高层协议，例如上面提到的HTTP,FTP,SMTP。
 
## 说了这两个模型这么多的东西了，是时候来比较一下两个模型的了
 ![比较]{http://d.pr/i/1384h}
 
 
 
 
 两个模型有很多的相似，例如都是以协议栈概念基础，并且协议栈的协议彼此独立，除此之外，协议的功能都大致相似
 
 但是它们是两个不同的模型，就说明它们有很多的不同点了
 
 例如OSI模型的核心是：
 
1. 1.服务
 
2. 2.接口
 
3. 3.协议
 
 有些学者觉得OSI模型的最大贡献就是区分了这三个概念。服务定义说明了该层是干什么的，而不是上一层怎么访问下一层；接口定义了上面的进程怎么访问本层；用到什么协议就是本层自己内部的关系了，它喜欢用什么就用什么（假如它知道什么是喜欢）,只要它实现了它要提供的服务就行了
 
 但是呢，TCP/IP模型是没有明确区分服务，接口，协议的。另外TCP/IP的协议和模型高度吻合，那么，一方面，它们两者结合得很好，另一方面，TCP/IP模型不适合其他的任何的协议栈 ，例如我们没办法用TCP/IP模型描述蓝牙。还有我们刚刚提到的，TCP/IP 只是3层的模型，链路层并不是真正意思的一层，只是一个接口，还有就是物理层和链路层也没有严格区分，但这两个是完全不同的层
 
 最后来总结一下吧，OSI的模型设计得很好，但是具体的实现技术就有问题，力图有些功能重复出现在每一层，造成低效，还有模型的一些糟糕实现，与之相反的是，TCP/IP的协议设计得很好，但是模型却很简陋。所以呢，不管是OSI模型及其协议，还是TCP/IP模型和协议，都不完美。然后在后来互联网的发展中，就吸收了OSI模型的优点，进行简化，并结合TCP/IP的协议，继续发展了。
#### 相关参考:
 
 《计算机网络》 wiki
